

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>GridAPPS-D State Estimator Service &mdash; GridAPPS-D 2021_05.0 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="&lt;no title&gt;" href="../ieee2030_5/README.html" />
    <link rel="prev" title="GridAPPS-D Voltage Violation Service" href="../voltage-violation/README.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> GridAPPS-D
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Installation &amp; Runtime</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../installation/windows10/index.html">Windows 10 Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation/1.4--Lesson-1.4--Running-GridAPPS-D.html">Running GridAPPS-D</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation/1.5--Lesson-1.5--Using-GridAPPS-D-Viz.html">Using the GridAPPS-D Viz</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation/1.6--Lesson-1.6--Docker-Shortcuts.html">Docker Shortcuts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation/1.7--Lesson-1.7--Cloud-Server-Configuration.html">Cloud Server Configuration</a></li>
</ul>
<p class="caption"><span class="caption-text">GridAPPS-D Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../overview/2.1--Lesson-2.1--Intro-to-GridAPPS-D.html">GridAPPS-D Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview/2.2--Lesson-2.2--GridAPPS-D-Architecture.html">GridAPPS-D Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview/2.3--Lesson-2.3--GridAPPS-D-Python-Library.html">GridAPPS-D Python Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview/2.4--Lesson-2.4--GridAPPS-D-Application-Structure.html">GridAPPS-D Application Structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview/2.5--Lesson-2.5--GridAPPS-D-Service-Structure.html">GridAPPS-D Service Structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview/2.6--Lesson-2.6--Common-Information-Model.html">Introduction to the Common Information Model</a></li>
</ul>
<p class="caption"><span class="caption-text">GridAPPS-D API Usage</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../api_usage/3.1--Lesson-3.1--API-Communication-Channels.html">API Communication Channels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api_usage/3.2--Lesson-3.2--API-Message-Structure.html">API Message Structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api_usage/3.3--Lesson-3.3--Using-the-PowerGrid-Models-API.html">Using the PowerGrid Models API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api_usage/3.4--Lesson-3.4--Using-the-Configuration-File-API.html">Using the Configuration File API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api_usage/3.5--Lesson-3.5--Creating-Running-Simulation-API.html">Running Simulations with the Simulation API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api_usage/3.6--Lesson-3.6--Controlling-Simulation-API.html">Publishing and Subscribing with the Simulation API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api_usage/3.7--Lesson-3.7--Using-the-Timeseries-API.html">Timeseries API</a></li>
</ul>
<p class="caption"><span class="caption-text">GridAPPS-D Applications</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../applications/restoration-WSU/source/index.html">Resilient Restoration (WSU)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../applications/VVO-WSU/README.html">Volt-Var Optimization (WSU)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../applications/DER-dispatch-NREL/README.html">DER Dispatch (NREL)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../applications/solar-forecast-NREL/README.html">Solar Forecasting (NREL)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../applications/grid-forecast-NREL/README.html">Grid Forecasting (NREL)</a></li>
</ul>
<p class="caption"><span class="caption-text">GridAPPS-D Services</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../dnp3/source/index.html">GridAPPS-D DNP3 Service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sensor-simulator/source/index.html">GridAPPS-D Sensor Simulator Service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../voltage-violation/README.html">GridAPPS-D Voltage Violation Service</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">GridAPPS-D State Estimator Service</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#purpose">Purpose</a></li>
<li class="toctree-l2"><a class="reference internal" href="#state-estimator-service-layout">State estimator service layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="#running-state-estimator-from-the-gridappsd-docker-container">Running state estimator from the gridappsd-docker container</a></li>
<li class="toctree-l2"><a class="reference internal" href="#building-state-estimator">Building state estimator</a></li>
<li class="toctree-l2"><a class="reference internal" href="#running-state-estimator-from-the-command-line">Running state estimator from the command line</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../alarms/README.html">GridAPPS-D Alarm Service</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">GridAPPS-D</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>GridAPPS-D State Estimator Service</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/services/state-estimator/README.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="tex2jax_ignore mathjax_ignore section" id="gridapps-d-state-estimator-service">
<h1>GridAPPS-D State Estimator Service<a class="headerlink" href="#gridapps-d-state-estimator-service" title="Permalink to this headline">¶</a></h1>
<div class="section" id="purpose">
<h2>Purpose<a class="headerlink" href="#purpose" title="Permalink to this headline">¶</a></h2>
<p>The state estimator service will produce and output the best available system state from measurements for use by other applications.</p>
</div>
<div class="section" id="state-estimator-service-layout">
<h2>State estimator service layout<a class="headerlink" href="#state-estimator-service-layout" title="Permalink to this headline">¶</a></h2>
<p>The following is the structure of the state estimator:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>.
├── README.md
├── LICENSE
└── state-estimator
    ├── include
    ├── src
    ├── bin
    ├── obj
    ├── Makefile
    └── state-estimator.config
└───<span class="o">(</span>Prerequisite libraries--SuiteSparse, ActiveMQ-CPP, Json<span class="o">)</span>
</pre></div>
</div>
</div>
<div class="section" id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h2>
<ol class="simple">
<li><p>Docker ce version 17.12 or newer is required.  You can install this via the docker_install_ubuntu.sh script in the gridappsd-docker repository described in the next step. (note for mint you will need to modify the file to work with xenial rather than ubuntu generically)</p></li>
<li><p>Clone the repository <a class="reference external" href="https://github.com/GRIDAPPSD/gridappsd-docker">https://github.com/GRIDAPPSD/gridappsd-docker</a> (referred to as gridappsd-docker repository).</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>~/git
└── gridappsd-docker
</pre></div>
</div>
<ol class="simple">
<li><p>To run the gridappsd-docker platform, follow the instructions provided at <a class="reference external" href="https://github.com/GRIDAPPSD/gridappsd-docker/README.md">https://github.com/GRIDAPPSD/gridappsd-docker/README.md</a>.</p></li>
<li><p>To configure and run a simulation under the platform, follow the instructions provided at <a class="reference external" href="https://gridappsd.readthedocs.io/en/master/using_gridappsd">https://gridappsd.readthedocs.io/en/master/using_gridappsd</a>.</p></li>
<li><p>The state estimator is distributed pre-built under the gridappsd-docker repository, but you may instead build the state estimator from source code from its own repository if you wish to modify it, run a different branch than master, or otherwise run it outside the gridappsd-docker container.</p></li>
<li><p>If you wish to run the state estimator provided with gridappsd-docker, follow the instructions in the following section, <a class="reference external" href="#running-state-estimator-from-the-gridappsd-docker-container">Running state estimator from the gridappsd-docker container</a>.</p></li>
<li><p>Alternatively, to build the state estimator from source code and then run that version from the command line, skip to the section <a class="reference external" href="#building-state-estimator">Building state estimator</a> below.</p></li>
</ol>
</div>
<div class="section" id="running-state-estimator-from-the-gridappsd-docker-container">
<h2>Running state estimator from the gridappsd-docker container<a class="headerlink" href="#running-state-estimator-from-the-gridappsd-docker-container" title="Permalink to this headline">¶</a></h2>
<ol class="simple">
<li><p>Configure the simulation from the GRIDAPPSD platform web browser visualization.</p></li>
<li><p>Click on the “Service Configuration” tab and then click on the checkbox under the gridappsd-state-estimator section of the configuration user interface to specify that state estimator should be started with the simulation.</p></li>
<li><p>Click on the “Submit” button and then the play button to start the simulation.</p></li>
<li><p>The state estimator will process running simulation measurements producing state estimate messages for other applications.</p></li>
<li><p>The gridappsd-state-plotter application can be used to plot state estimator output as described at <a class="reference external" href="https://github.com/GRIDAPPSD/gridappsd-state-plotter">https://github.com/GRIDAPPSD/gridappsd-state-plotter</a>.</p></li>
</ol>
<p>The remainder of these instructions apply only when building the state estimator from source code and running that build from the command line.</p>
</div>
<div class="section" id="building-state-estimator">
<h2>Building state estimator<a class="headerlink" href="#building-state-estimator" title="Permalink to this headline">¶</a></h2>
<ol class="simple">
<li><p>Clone the repository <a class="reference external" href="https://github.com/GRIDAPPSD/gridappsd-state-estimator">https://github.com/GRIDAPPSD/gridappsd-state-estimator</a> next to the gridappsd-docker repository (they should both have the same parent folder, assumed to be ~/git in docker-compose.yml)</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>~/git
├── gridappsd-docker
└── gridappsd-state-estimator
</pre></div>
</div>
<ol class="simple">
<li><p>Then the following two repositories should be cloned under the top-level gridappsd-state-estimator directory of the repository cloned above</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>	<span class="o">-</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">GRIDAPPSD</span><span class="o">/</span><span class="n">SuiteSparse</span>
	<span class="o">-</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">GRIDAPPSD</span><span class="o">/</span><span class="n">json</span>
</pre></div>
</div>
<ol class="simple">
<li><p>The ActiveMQ C++ client library, ActiveMQ-CPP, should be downloaded from the URL below as a Unix source code distrubtion.  Both the 3.9.4 and 3.9.5 releases have been successfully used with state estimator.  The tar.gz or tar.bz2 distribution should be extracted under the gridappsd-state-estimator directory, the same location as the SuiteSparse and json repositories.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="o">-</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">activemq</span><span class="o">.</span><span class="n">apache</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">components</span><span class="o">/</span><span class="n">cms</span><span class="o">/</span><span class="n">download</span>
</pre></div>
</div>
<ol class="simple">
<li><p>Building prerequisite libraries requires some other packages to be installed first.  The following apt-get install commands should install those packages if they are not already installed:</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo apt-get install cmake
sudo apt-get install m4
sudo apt-get install liblapack-dev libblas-dev
sudo apt-get install libapr1 libapr1-dev
sudo apt-get install libssl-dev
</pre></div>
</div>
<ol class="simple">
<li><p>From the gridappsd-state-estimator directory, run the following commands to build the prerequisite libraries and then the state-estimator executable:</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> activemq-cpp-library-*
./configure
make
sudo make install

<span class="nb">cd</span> ../SuiteSparse
make <span class="nv">LAPACK</span><span class="o">=</span>-llapack <span class="nv">BLAS</span><span class="o">=</span>-lblas

<span class="nb">cd</span> ../state-estimator
make
</pre></div>
</div>
<ol class="simple">
<li><p>The executable application will be placed in bin/state-estimator.  The Json distribution consists entirely of include files and therefore is not compiled separately from the application using it.</p></li>
</ol>
</div>
<div class="section" id="running-state-estimator-from-the-command-line">
<h2>Running state estimator from the command line<a class="headerlink" href="#running-state-estimator-from-the-command-line" title="Permalink to this headline">¶</a></h2>
<ol class="simple">
<li><p>Edit the run-se.sh script in the state-estimator subdirectory of the top-level gridappsd-state-estimator repository, uncomment the appropriate SIMREQ variable for the model being run based on the comment at the end of each SIMREQ line denoting the corresponding model, and save changes.</p></li>
<li><p>Configure and start the simulation from the GRIDAPPSD platform web browser visualization, click on the “Simulation ID” value in the upper left corner of the simulation diagram to copy the value to the clipboard.</p></li>
<li><p>Invoke the script “./run-se.sh” from the command line with the Simulation ID value pasted from the clipboard as the command line argument to the script.</p></li>
<li><p>The state estimator will process running simulation measurements producing state estimate messages for other applications along with diagnostic log output to the terminal.</p></li>
<li><p>The gridappsd-state-plotter application can be used to plot state estimator output as described at <a class="reference external" href="https://github.com/GRIDAPPSD/gridappsd-state-plotter">https://github.com/GRIDAPPSD/gridappsd-state-plotter</a>.</p></li>
</ol>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../ieee2030_5/README.html" class="btn btn-neutral float-right" title="&lt;no title&gt;" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="../voltage-violation/README.html" class="btn btn-neutral float-left" title="GridAPPS-D Voltage Violation Service" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2017-2021, Battelle Memorial Institute, All rights reserved..

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>