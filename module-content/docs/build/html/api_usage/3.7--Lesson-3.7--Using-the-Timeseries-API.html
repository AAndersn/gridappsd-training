

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Timeseries API &mdash; GridAPPS-D 2021_05.0 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Resilient Restoration (WSU)" href="../applications/restoration-WSU/source/index.html" />
    <link rel="prev" title="Publishing and Subscribing with the Simulation API" href="3.6--Lesson-3.6--Controlling-Simulation-API.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> GridAPPS-D
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Installation &amp; Runtime</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation/windows10/index.html">Windows 10 Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation/1.4--Lesson-1.4--Running-GridAPPS-D.html">Running GridAPPS-D</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation/1.5--Lesson-1.5--Using-GridAPPS-D-Viz.html">Using the GridAPPS-D Viz</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation/1.6--Lesson-1.6--Docker-Shortcuts.html">Docker Shortcuts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation/1.7--Lesson-1.7--Cloud-Server-Configuration.html">Cloud Server Configuration</a></li>
</ul>
<p class="caption"><span class="caption-text">GridAPPS-D Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview/2.1--Lesson-2.1--Intro-to-GridAPPS-D.html">GridAPPS-D Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/2.2--Lesson-2.2--GridAPPS-D-Architecture.html">GridAPPS-D Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/2.3--Lesson-2.3--GridAPPS-D-Python-Library.html">GridAPPS-D Python Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/2.4--Lesson-2.4--GridAPPS-D-Application-Structure.html">GridAPPS-D Application Structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/2.5--Lesson-2.5--GridAPPS-D-Service-Structure.html">GridAPPS-D Service Structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/2.6--Lesson-2.6--Common-Information-Model.html">Introduction to the Common Information Model</a></li>
</ul>
<p class="caption"><span class="caption-text">GridAPPS-D API Usage</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="3.1--Lesson-3.1--API-Communication-Channels.html">API Communication Channels</a></li>
<li class="toctree-l1"><a class="reference internal" href="3.2--Lesson-3.2--API-Message-Structure.html">API Message Structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="3.3--Lesson-3.3--Using-the-PowerGrid-Models-API.html">Using the PowerGrid Models API</a></li>
<li class="toctree-l1"><a class="reference internal" href="3.4--Lesson-3.4--Using-the-Configuration-File-API.html">Using the Configuration File API</a></li>
<li class="toctree-l1"><a class="reference internal" href="3.5--Lesson-3.5--Creating-Running-Simulation-API.html">Running Simulations with the Simulation API</a></li>
<li class="toctree-l1"><a class="reference internal" href="3.6--Lesson-3.6--Controlling-Simulation-API.html">Publishing and Subscribing with the Simulation API</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Timeseries API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#Introduction-to-the-Timeseries-API">Introduction to the Timeseries API</a></li>
<li class="toctree-l2"><a class="reference internal" href="#API-Syntax-Overview">API Syntax Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#API-Communication-Channel">API Communication Channel</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#2.2.-Query-Message-Structure">2.2. Query Message Structure</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Structure-of-a-Query-Message">Structure of a Query Message</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#2.3.-Specifying-the-queryMeasurement-value">2.3. Specifying the <code class="docutils literal notranslate"><span class="pre">queryMeasurement</span></code> value</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Specifying-the-queryMeasurement-value">Specifying the queryMeasurement value</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#Querying-for-Timeseries-Data">Querying for Timeseries Data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Querying-for-Weather-Data">Querying for Weather Data</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#Interpreting-GridAPPS-D-Weather-Data">Interpreting GridAPPS-D Weather Data</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Querying-Weather-Data">Querying Weather Data</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#Query-for-Simulation-Output-Data">Query for Simulation Output Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Query-for-Simulation-Input-Data">Query for Simulation Input Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Query-for-Sensor-Service-Data">Query for Sensor Service Data</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#Using-the-Sensor-Service">Using the Sensor Service</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Querying-Sensor-Service-Data">Querying Sensor Service Data</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">GridAPPS-D Applications</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../applications/restoration-WSU/source/index.html">Resilient Restoration (WSU)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../applications/VVO-WSU/README.html">Volt-Var Optimization (WSU)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../applications/DER-dispatch-NREL/README.html">DER Dispatch (NREL)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../applications/solar-forecast-NREL/README.html">Solar Forecasting (NREL)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../applications/grid-forecast-NREL/README.html">Grid Forecasting (NREL)</a></li>
</ul>
<p class="caption"><span class="caption-text">GridAPPS-D Services</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../services/dnp3/source/index.html">GridAPPS-D DNP3 Service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../services/sensor-simulator/source/index.html">GridAPPS-D Sensor Simulator Service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../services/voltage-violation/README.html">GridAPPS-D Voltage Violation Service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../services/state-estimator/README.html">GridAPPS-D State Estimator Service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../services/alarms/README.html">GridAPPS-D Alarm Service</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">GridAPPS-D</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Timeseries API</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/api_usage/3.7--Lesson-3.7--Using-the-Timeseries-API.ipynb.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="Timeseries-API">
<h1>Timeseries API<a class="headerlink" href="#Timeseries-API" title="Permalink to this headline">¶</a></h1>
<div class="section" id="Introduction-to-the-Timeseries-API">
<h2>Introduction to the Timeseries API<a class="headerlink" href="#Introduction-to-the-Timeseries-API" title="Permalink to this headline">¶</a></h2>
<p>The Timeseries API is used to query the Influx Database, which stores measurement data from simulations. The API calls can be used to * obtain weather data * obtain measurements from simuation data using measurement mRIDs * obtain equipments commands and other simulation input data * obtain simulated field data from the Sensor Service</p>
</div>
<div class="section" id="API-Syntax-Overview">
<h2>API Syntax Overview<a class="headerlink" href="#API-Syntax-Overview" title="Permalink to this headline">¶</a></h2>
<p><strong>Application passes query to GridAPPS-D Platform</strong></p>
<p>First, the application creates a query message for requesting information about the desired power system components in the format of a JSON string or equivalant Python dictionary object. The syntax of this message is explained in detail below.</p>
<p>The query is sent using the <code class="docutils literal notranslate"><span class="pre">gapps.get_response(topic,</span> <span class="pre">message)</span></code> method on the Timeseries queue channel with a response expected back from the GridAPPS-D platform within the specified timeout period.</p>
<p>The application then passes the query through the Timeseries API to the GridAPPS-D Platform, which publishes it to the <code class="docutils literal notranslate"><span class="pre">goss.gridappsd.process.request.data.timeseries</span></code> queue channel on the GOSS Message Bus. If the app is authenticated and authorized to pass queries, the query message is delivered to the Data Managers, which obtain the desired information from the Timeseries Influx Database.</p>
<p><strong>GridAPPS-D Platform responds to Application query</strong></p>
<p>The Data Managers then publish the response from the Timeseries Influx Database to the appropriate queue channel. The Timeseries API then returns the desired information back to the application as a JSON message or equivalant Python dictionary object.</p>
<div class="section" id="API-Communication-Channel">
<h3>API Communication Channel<a class="headerlink" href="#API-Communication-Channel" title="Permalink to this headline">¶</a></h3>
<p>API calls to the timeseries databases use a static <code class="docutils literal notranslate"><span class="pre">/queue/</span></code> channel, which was covered in <a class="reference external" href="Lesson%201.4.%20GridAPPS-D%20Topics.ipynb">Lesson 1.4</a>. The topic can be specified as a text string or by importing the topics library:</p>
<p><strong>Text String:</strong> The topic can be specified as a static string:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">topic</span> <span class="pre">=</span> <span class="pre">&quot;goss.gridappsd.process.request.data.timeseries&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">gapps.get_response(topic,</span> <span class="pre">message)</span></code></p></li>
</ul>
<p><strong>GridAPPSD-Python Library Method:</strong> The correct topic can also be imported from the GridAPPSD-Python topics library:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">gridappsd</span> <span class="pre">import</span> <span class="pre">topics</span> <span class="pre">as</span> <span class="pre">t</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">gapps.get_response(t.TIMESERIES,</span> <span class="pre">message)</span></code></p></li>
</ul>
<hr class="docutils" />
</div>
</div>
<div class="section" id="2.2.-Query-Message-Structure">
<h2>2.2. Query Message Structure<a class="headerlink" href="#2.2.-Query-Message-Structure" title="Permalink to this headline">¶</a></h2>
<div class="section" id="Structure-of-a-Query-Message">
<h3>Structure of a Query Message<a class="headerlink" href="#Structure-of-a-Query-Message" title="Permalink to this headline">¶</a></h3>
<p>Queries passed to Timeseries API are formatted as python dictionaries or equivalent JSON scripts wrapped as a python string.</p>
<p>The accepted set of key-value pairs for the Timeseries API query message is</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>message = &quot;&quot;&quot;
{
    &quot;queryMeasurement&quot;: &quot;INSERT QUERY HERE&quot;,
    &quot;queryFilter&quot;: {&quot;key1&quot;: &quot;value1&quot;
                   &quot;key2&quot;: &quot;value2&quot;},
    &quot;responseFormat&quot;: &quot;JSON&quot;
}
</pre></div>
</div>
<p>The components of the message are as follows:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;queryMeasurement&quot;:</span></code> – Specifies the type of measurement being requested. Allowed queryMeasurement values are listed in the next section.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;queryFilter&quot;:</span></code> – Filters the measurements to just the set values desired by the application. The set of allowed values depends on the value associated with queryMeasurement.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;responseFormat&quot;:</span></code> – Specifies the format of the response, can be <code class="docutils literal notranslate"><span class="pre">&quot;JSON&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;CSV&quot;</span></code>, or <code class="docutils literal notranslate"><span class="pre">&quot;XML&quot;</span></code>. (CAUTION: the Timeseries API uses the key <em>reponseFormat</em>, while the PowerGridModel API uses the key <em>resultFormat</em>. Using the wrong key for either API will result in a java.lang error.)</p></li>
</ul>
<p>The usage of each of these message components are explained in detail with code block examples below.</p>
<p><strong>Important</strong>: Be sure to pay attention to placement of commas ( <strong>,</strong> ) at the end of each line. Commas are placed at the end of each line <em>except</em> the last line. Incorrect comma placement will result in a JsonSyntaxException.</p>
<p>All of the queries are passed to the Timeseries API using the <code class="docutils literal notranslate"><span class="pre">.get_response(topic,</span> <span class="pre">message)</span></code> method for the GridAPPS-D platform connection variable.</p>
<hr class="docutils" />
</div>
</div>
<div class="section" id="2.3.-Specifying-the-queryMeasurement-value">
<h2>2.3. Specifying the <code class="docutils literal notranslate"><span class="pre">queryMeasurement</span></code> value<a class="headerlink" href="#2.3.-Specifying-the-queryMeasurement-value" title="Permalink to this headline">¶</a></h2>
<div class="section" id="Specifying-the-queryMeasurement-value">
<h3>Specifying the queryMeasurement value<a class="headerlink" href="#Specifying-the-queryMeasurement-value" title="Permalink to this headline">¶</a></h3>
<p>Below are the allowable values associated with the <code class="docutils literal notranslate"><span class="pre">queryMeasurement</span></code> key, which are used to specify the type of data requested by each query. Executable code block examples are provided for each of the requests in the subsections below.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;queryMeasurement&quot;:</span> <span class="pre">&quot;weather&quot;</span></code> – <a class="reference external" href="#3.1.-Query-for-Weather-Data">Query for weather data</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;queryMeasurement&quot;:</span> <span class="pre">&quot;simulation&quot;</span></code> – <a class="reference external" href="#3.2.-Query-for-Simulation-Output-Data">Query for simulation output data</a> and <a class="reference external" href="#3.3.-Query-for-Simulation-Input-Data">query for simulation intput data</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;queryMeasurement&quot;:</span> <span class="pre">&quot;gridappsd-sensor-simulator&quot;</span></code> – <a class="reference external" href="#3.4.-Query-for-Sensor-Service-Data">Query for sensor service data</a></p></li>
</ul>
<hr class="docutils" />
</div>
</div>
<div class="section" id="Querying-for-Timeseries-Data">
<h2>Querying for Timeseries Data<a class="headerlink" href="#Querying-for-Timeseries-Data" title="Permalink to this headline">¶</a></h2>
<p>This section outlines the details of key-value pairs for the possible queries associated with each value of the <code class="docutils literal notranslate"><span class="pre">queryMeasurement</span></code> key listed above.</p>
<div class="section" id="Querying-for-Weather-Data">
<h3>Querying for Weather Data<a class="headerlink" href="#Querying-for-Weather-Data" title="Permalink to this headline">¶</a></h3>
<div class="section" id="Interpreting-GridAPPS-D-Weather-Data">
<h4>Interpreting GridAPPS-D Weather Data<a class="headerlink" href="#Interpreting-GridAPPS-D-Weather-Data" title="Permalink to this headline">¶</a></h4>
<p>The weather data is based on exported data collected from the Solar Radiation Research Laboratory (39.74N,105.18W,1829 meter elevation) January - December 2013. The original dataset was based in Mountain Standard Time (MST).</p>
<p>The original column names included engineering units, but could not be included during data import. Below is a mapping between the exported column headers and the fields in the Influx database management system.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Original Exported Data                      Influx Measurement Field Key       Field Type
------------------------------------        ----------------------------       ----------
DATE (MM/DD/YYYY)                           DATE                               String
MST                                         MST                                String
Global CM22 (vent/cor) [W/ft^2]             GlobalCM22                         Float
Direct CH1 [W/ft^2]                         DirectCH1                          Float
Diffuse CM22 (vent/cor) [W/ft^2]            Diffuse                            Float
Tower Dry Bulb Temp [deg F]                 TowerDryBulbTemp                   Float
Tower RH [%]                                TowerRH                            Float
Avg Wind Speed @ 42ft [MPH]                 AvgWindSpeed                       Float
Avg Wind Direction @ 42ft [deg from N]      AvgWindDirection                   Float

Original Exported Data                      Influx Measurement Tag             Type
------------------------------------        ----------------------------       ----------
n/a                                         lat                                String
n/a                                         long                               String
n/a                                         place                              String
</pre></div>
</div>
<hr class="docutils" />
</div>
<div class="section" id="Querying-Weather-Data">
<h4>Querying Weather Data<a class="headerlink" href="#Querying-Weather-Data" title="Permalink to this headline">¶</a></h4>
<p>GridAPPS-D contains one year of weather data (details given in next subsection), which can be obtained with the following query</p>
<p>Measurement request key-value pair:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;queryMeasurement&quot;:</span> <span class="pre">&quot;weather&quot;</span></code></p></li>
</ul>
<p>Allowed key-value pairs for <code class="docutils literal notranslate"><span class="pre">queryFilter</span></code>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&quot;queryFilter&quot;: {    KEY                   VALUE
                &quot;startTime&quot;:            epoch time number,
                &quot;endTime&quot;:              epoch time number,
                &quot;AvgWindDirection&quot;:     number,
                &quot;AvgWindSpeed&quot;:         number,
                &quot;Diffuse&quot;:              number,
                &quot;DirectCH1&quot;:            number,
                &quot;GlobalCM22&quot;:           number,
                &quot;MST&quot;:                  number,
                &quot;TowerDryBulbTemp&quot;:     number,
                &quot;TowerRH&quot;:              number,
                &quot;lat&quot;:                  string,
                &quot;long&quot;:                 string,
                &quot;place&quot;:                string }
</pre></div>
</div>
<p>Not all of the <code class="docutils literal notranslate"><span class="pre">queryFilter</span></code> key-value pairs need to be used. These are filters that can be used to restrict the returned data to particular values.</p>
<p><strong>Note:</strong> The Timeseries API currently does not support querying for a range of values (e.g. all data for temperature betweeen 25 and 30C). This functionality will be added in a future release. Queries are currently limited to a single value.</p>
<p><strong>Example 1: query for just the data between a given ``”startTime”`` and ``”endTime”``:</strong></p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">topic</span> <span class="o">=</span> <span class="s2">&quot;goss.gridappsd.process.request.data.timeseries&quot;</span> <span class="c1"># Specify Timeseries API GridAPPS-D topic</span>

<span class="c1"># Use queryFilter of &quot;startTime&quot; and &quot;endTime&quot;</span>
<span class="n">message</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;queryMeasurement&quot;</span><span class="p">:</span><span class="s2">&quot;weather&quot;</span><span class="p">,</span>
    <span class="s2">&quot;queryFilter&quot;</span><span class="p">:{</span><span class="s2">&quot;startTime&quot;</span><span class="p">:</span><span class="s2">&quot;1357048800000000&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;endTime&quot;</span><span class="p">:</span><span class="s2">&quot;1357048860000000&quot;</span><span class="p">},</span>
    <span class="s2">&quot;responseFormat&quot;</span><span class="p">:</span><span class="s2">&quot;JSON&quot;</span>
<span class="p">}</span>

<span class="n">gapps</span><span class="o">.</span><span class="n">get_response</span><span class="p">(</span><span class="n">topic</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span> <span class="c1"># Pass API call</span>
</pre></div>
</div>
</div>
<p><strong>Example 2: Query for weather data of particular values:</strong></p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">topic</span> <span class="o">=</span> <span class="s2">&quot;goss.gridappsd.process.request.data.timeseries&quot;</span> <span class="c1"># Specify Timeseries API GridAPPS-D topic</span>

<span class="c1"># Use queryFilter of &quot;TowerDryBulbTemp&quot; and &quot;AvgWindSpeed&quot;</span>
<span class="n">message</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;queryMeasurement&quot;</span><span class="p">:</span><span class="s2">&quot;weather&quot;</span><span class="p">,</span>
    <span class="s2">&quot;queryFilter&quot;</span><span class="p">:{</span><span class="s2">&quot;TowerDryBulbTemp&quot;</span><span class="p">:</span> <span class="mf">30.0326</span><span class="p">,</span>
                   <span class="s2">&quot;AvgWindSpeed&quot;</span><span class="p">:</span> <span class="mf">7.4624</span><span class="p">},</span>
    <span class="s2">&quot;responseFormat&quot;</span><span class="p">:</span><span class="s2">&quot;JSON&quot;</span>
<span class="p">}</span>

<span class="n">gapps</span><span class="o">.</span><span class="n">get_response</span><span class="p">(</span><span class="n">topic</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span> <span class="c1"># Pass API call</span>
</pre></div>
</div>
</div>
<hr class="docutils" />
</div>
</div>
<div class="section" id="Query-for-Simulation-Output-Data">
<h3>Query for Simulation Output Data<a class="headerlink" href="#Query-for-Simulation-Output-Data" title="Permalink to this headline">¶</a></h3>
<p>All of the measurement output from a simulation is stored in the Influx Database and can be queried with the Timeseries API</p>
<p>Measurement request key-value pair:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;queryMeasurement&quot;:</span> <span class="pre">&quot;simulation&quot;</span></code></p></li>
</ul>
<p>Allowed key-value pairs for <code class="docutils literal notranslate"><span class="pre">queryFilter</span></code> for output data</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&quot;queryFilter&quot;: {    KEY                         VALUE
                &quot;startTime&quot;:                    epoch time number ,
                &quot;endTime&quot;:                      epoch time number ,
                &quot;measurement_mrid&quot;:             string OR [array of string values] ,
                &quot;simulation_id&quot;:                numeric string ,
                &quot;hasSimulationMessageType&quot;:     &quot;OUTPUT&quot; OR &quot;INPUT&quot; ,
                &quot;angle&quot;:                        number ,
                &quot;magnitude&quot;:                    number }
</pre></div>
</div>
<p>In the Getting Started section of this tutorial, we started a demo simulation of the IEEE 123 node model. That simulation has now completed, and we can pass queries to the Timeseries API to retrieve measurements from the completed simulation.</p>
<p><strong>Example 1: Query for all measurements between a ``”startTime”`` and ``”endTime”``</strong></p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">topic</span> <span class="o">=</span> <span class="s2">&quot;goss.gridappsd.process.request.data.timeseries&quot;</span> <span class="c1"># Specify Timeseries API GridAPPS-D topic</span>

<span class="c1"># Use queryFilter of &quot;startTime&quot; and &quot;endTime&quot;</span>
<span class="n">message</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;queryMeasurement&quot;</span><span class="p">:</span> <span class="s2">&quot;simulation&quot;</span><span class="p">,</span>
    <span class="s2">&quot;queryFilter&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;simulation_id&quot;</span><span class="p">:</span> <span class="n">simulation_id</span><span class="p">,</span>
        <span class="s2">&quot;startTime&quot;</span><span class="p">:</span> <span class="s2">&quot;1570041130&quot;</span><span class="p">,</span>
        <span class="s2">&quot;endTime&quot;</span><span class="p">:</span> <span class="s2">&quot;1570041140&quot;</span><span class="p">},</span>
    <span class="s2">&quot;responseFormat&quot;</span><span class="p">:</span> <span class="s2">&quot;JSON&quot;</span>
<span class="p">}</span>

<span class="n">gapps</span><span class="o">.</span><span class="n">get_response</span><span class="p">(</span><span class="n">topic</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span> <span class="c1"># Pass API call</span>
</pre></div>
</div>
</div>
<p><strong>Example 2: Query for all measurements associated with list of measurement mRIDs</strong></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">topic</span> <span class="o">=</span> <span class="s2">&quot;goss.gridappsd.process.request.data.timeseries&quot;</span> <span class="c1"># Specify Timeseries API GridAPPS-D topic</span>

<span class="c1"># Query for a particular set of measurments</span>
<span class="n">message</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;queryMeasurement&quot;</span><span class="p">:</span><span class="s2">&quot;simulation&quot;</span><span class="p">,</span>
    <span class="s2">&quot;queryFilter&quot;</span><span class="p">:{</span><span class="s2">&quot;simulation_id&quot;</span><span class="p">:</span> <span class="n">simulation_id</span><span class="p">,</span>
                   <span class="s2">&quot;measurement_mrid&quot;</span><span class="p">:[</span><span class="s2">&quot;_5efa022e-da12-4c33-b127-10186624a8f7&quot;</span><span class="p">,</span><span class="s2">&quot;_4c515f50-51df-494a-a860-653c0c874fe1&quot;</span><span class="p">]},</span>
    <span class="s2">&quot;responseFormat&quot;</span><span class="p">:</span><span class="s2">&quot;JSON&quot;</span>
<span class="p">}</span>

<span class="n">gapps</span><span class="o">.</span><span class="n">get_response</span><span class="p">(</span><span class="n">topic</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span> <span class="c1"># Pass API call</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-3-116a5112ce47&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-intense-fg ansi-bold">      4</span> message = {
<span class="ansi-green-intense-fg ansi-bold">      5</span>     <span class="ansi-blue-fg">&#34;queryMeasurement&#34;</span><span class="ansi-blue-fg">:</span><span class="ansi-blue-fg">&#34;simulation&#34;</span><span class="ansi-blue-fg">,</span>
<span class="ansi-green-fg">----&gt; 6</span><span class="ansi-red-fg">     &#34;queryFilter&#34;:{&#34;simulation_id&#34;: simulation_id,
</span><span class="ansi-green-intense-fg ansi-bold">      7</span>                    &#34;measurement_mrid&#34;:[&#34;_5efa022e-da12-4c33-b127-10186624a8f7&#34;,&#34;_4c515f50-51df-494a-a860-653c0c874fe1&#34;]},
<span class="ansi-green-intense-fg ansi-bold">      8</span>     <span class="ansi-blue-fg">&#34;responseFormat&#34;</span><span class="ansi-blue-fg">:</span><span class="ansi-blue-fg">&#34;JSON&#34;</span>

<span class="ansi-red-fg">NameError</span>: name &#39;simulation_id&#39; is not defined
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">topic</span> <span class="o">=</span> <span class="s2">&quot;goss.gridappsd.process.request.data.timeseries&quot;</span> <span class="c1"># Specify Timeseries API GridAPPS-D topic</span>

<span class="c1"># Query for a particular set of measurments</span>
<span class="n">message</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;queryMeasurement&quot;</span><span class="p">:</span><span class="s2">&quot;simulation&quot;</span><span class="p">,</span>
    <span class="s2">&quot;queryFilter&quot;</span><span class="p">:{</span><span class="s2">&quot;simulation_id&quot;</span><span class="p">:</span> <span class="s2">&quot;1313108762&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;measurement_mrid&quot;</span><span class="p">:</span><span class="s2">&quot;_63CDE28F-FFC9-4869-BC12-EC3244A056CA&quot;</span><span class="p">},</span>
    <span class="s2">&quot;responseFormat&quot;</span><span class="p">:</span><span class="s2">&quot;JSON&quot;</span>
<span class="p">}</span>

<span class="n">gapps</span><span class="o">.</span><span class="n">get_response</span><span class="p">(</span><span class="n">topic</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span> <span class="c1"># Pass API call</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;data&#39;: {}, &#39;responseComplete&#39;: True, &#39;id&#39;: &#39;2067017288&#39;}
</pre></div></div>
</div>
<hr class="docutils" />
</div>
<div class="section" id="Query-for-Simulation-Input-Data">
<h3>Query for Simulation Input Data<a class="headerlink" href="#Query-for-Simulation-Input-Data" title="Permalink to this headline">¶</a></h3>
<p>All of the equipment control commands and other input data from a simulation is stored in the Influx Database and can be queried with the Timeseries API</p>
<p>Measurement request key-value pair:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;queryMeasurement&quot;:</span> <span class="pre">&quot;simulation&quot;</span></code></p></li>
</ul>
<p>Allowed key-value pairs for <code class="docutils literal notranslate"><span class="pre">queryFilter</span></code> for output data</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&quot;queryFilter&quot;: {    KEY                         VALUE
                &quot;startTime&quot;:                    epoch time number ,
                &quot;endTime&quot;:                      epoch time number ,
                &quot;measurement_mrid&quot;:             mRID string OR [array of string values] ,
                &quot;simulation_id&quot;:                numeric string ,
                &quot;hasSimulationMessageType&quot;:     &quot;OUTPUT&quot; OR &quot;INPUT&quot; ,
                hasMeasurementDifference        &quot;FORWARD&quot; OR &quot;REVERSE&quot; ,
                attribute                       string ,
                difference_mrid                 mRID string ,
                object                          string ,
                value                           number  }
</pre></div>
</div>
<p><strong>Known issue in GridAPPS-D releases_2019.09.0:</strong> Events passed from the Test Manager or from a Configuration File are not registering correctly in the Influx database. Simulation Input from operator control actions in the viz are being stored correctly. For this example, run a simulation of the 123 Node Model in the Viz and open any switch. Then copy the simulation_id and paste it into the first code block below.</p>
<p><strong>Example 1: Query for all simulation input commands</strong></p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">viz_simulation_id</span> <span class="o">=</span> <span class="s2">&quot;602611015&quot;</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">topic</span> <span class="o">=</span> <span class="s2">&quot;goss.gridappsd.process.request.data.timeseries&quot;</span> <span class="c1"># Specify Timeseries API GridAPPS-D topic</span>

<span class="c1"># Query for all equipment command inputs passed to simulation</span>
<span class="n">message</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;queryMeasurement&quot;</span><span class="p">:</span> <span class="s2">&quot;simulation&quot;</span><span class="p">,</span>
    <span class="s2">&quot;queryFilter&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;simulation_id&quot;</span><span class="p">:</span> <span class="n">viz_simulation_id</span><span class="p">,</span>
        <span class="s2">&quot;hasSimulationMessageType&quot;</span><span class="p">:</span> <span class="s2">&quot;INPUT&quot;</span><span class="p">},</span>
    <span class="s2">&quot;responseFormat&quot;</span><span class="p">:</span> <span class="s2">&quot;JSON&quot;</span>
<span class="p">}</span>

<span class="n">gapps</span><span class="o">.</span><span class="n">get_response</span><span class="p">(</span><span class="n">topic</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span> <span class="c1"># Pass API call</span>
</pre></div>
</div>
</div>
<hr class="docutils" />
</div>
<div class="section" id="Query-for-Sensor-Service-Data">
<h3>Query for Sensor Service Data<a class="headerlink" href="#Query-for-Sensor-Service-Data" title="Permalink to this headline">¶</a></h3>
<div class="section" id="Using-the-Sensor-Service">
<h4>Using the Sensor Service<a class="headerlink" href="#Using-the-Sensor-Service" title="Permalink to this headline">¶</a></h4>
<p>The GridAPPS-D Sensor Service simulates the noise and packet losses of real field device measurements based upon the magnitude of “prestine” simulated values from the GridLab-D simulation. This service has been specifically designed to work within the gridappsd platform container. The GridAPPS-D platform will start the service when it is specified as a dependency of an application or when a service configuration is specified within the GridAPPS-D Visualization.</p>
<p><strong>Python Application Usage:</strong> The python application using this service should require gridappsd-sensor-simulator as a requirement. In addition, the following python code shows how to get the correct topic for the service.</p>
<p><strong>Service Configuration:</strong> The sensor-config in the above image shows an example of how to configure a portion of the system to have sensor output. Each mrid (such as <code class="docutils literal notranslate"><span class="pre">_99db0dc7-ccda-4ed5-a772-a7db362e9818</span></code>) will be monitored by this service and either use the default values or use the specified values during the service runtime.</p>
<p>The general format for the Sensor Service configuration message is</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>{
   &quot;_99db0dc7-ccda-4ed5-a772-a7db362e9818&quot;: {
      &quot;nominal-value&quot;: 100,
      &quot;perunit-confidence-band&quot;: 0.01,
      &quot;aggregation-interval&quot;: 30,
      &quot;perunit-drop-rate&quot;: 0.01
   },
   &quot;_ee65ee31-a900-4f98-bf57-e752be924c4d&quot;:{},
   &quot;_f2673c22-654b-452a-8297-45dae11b1e14&quot;: {}
}
</pre></div>
</div>
<p>The other options for the service are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;default-perunit-confidence-band&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;default-aggregation-interval&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;default-perunit-drop-rate&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;passthrough-if-not-specified&quot;</span></code></p></li>
</ul>
<p>These options will be used when not specified within the sensor-config block.</p>
<p>Note: Currently the nominal-value is not looked up from the database. At this time services aren’t able to tell the platform when they are “ready”. This will be implemented in the near future and then all of the nominal-values will be queried from the database.</p>
<p>A complete example of Sensor Service configuration is available in the sample python script <a class="reference external" href="Run123NodeSensorServiceDemo.py">Run123NodeSensorServiceDemo.py</a> for three measurements in the IEEE 123 Node Model generated over a two minute simulation.</p>
<hr class="docutils" />
</div>
<div class="section" id="Querying-Sensor-Service-Data">
<h4>Querying Sensor Service Data<a class="headerlink" href="#Querying-Sensor-Service-Data" title="Permalink to this headline">¶</a></h4>
<p>All of the simulated field measurements created by the Sensor Service are stored in the Influx Database and can be queried using the Timeseries API:</p>
<p>Measurement request key-value pair:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;queryMeasurement&quot;:</span> <span class="pre">&quot;gridappsd-sensor-simulator&quot;</span></code></p></li>
</ul>
<p>Allowed key-value pairs for <code class="docutils literal notranslate"><span class="pre">queryFilter</span></code> for output data</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&quot;queryFilter&quot;: {    KEY                         VALUE
                &quot;startTime&quot;:                    number ,
                &quot;endTime&quot;:                      number ,
                &quot;measurement_mrid&quot;:             string OR [array of string values] ,
                &quot;simulation_id&quot;:                string ,
                &quot;angle&quot;:                        number ,
                &quot;magnitude&quot;:                    number ,
                &quot;value&quot;                         number }
</pre></div>
</div>
<p><strong>Example 1: Query for all Sensor Service Data between a given ``”startTime”`` and ``”endTime”``:</strong></p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">topic</span> <span class="o">=</span> <span class="s2">&quot;goss.gridappsd.process.request.data.timeseries&quot;</span> <span class="c1"># Specify Timeseries API GridAPPS-D topic</span>

<span class="c1"># Query for all Sensor Service Data in time range:</span>
<span class="n">message</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;queryMeasurement&quot;</span><span class="p">:</span> <span class="s2">&quot;gridappsd-sensor-simulator&quot;</span><span class="p">,</span>
    <span class="s2">&quot;queryFilter&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;simulation_id&quot;</span><span class="p">:</span> <span class="n">simulation_id</span><span class="p">,</span>
                    <span class="s2">&quot;startTime&quot;</span><span class="p">:</span> <span class="s2">&quot;1570041130&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;endTime&quot;</span><span class="p">:</span> <span class="s2">&quot;1570041140&quot;</span><span class="p">},</span>
    <span class="s2">&quot;responseFormat&quot;</span><span class="p">:</span> <span class="s2">&quot;JSON&quot;</span>
<span class="p">}</span>

<span class="n">gapps</span><span class="o">.</span><span class="n">get_response</span><span class="p">(</span><span class="n">topic</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span> <span class="c1"># Pass API call</span>
</pre></div>
</div>
</div>
<hr class="docutils" />
<p><img alt="gridappsd-logo" src="../_images/GridAPPS-D_narrow.png" /></p>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../applications/restoration-WSU/source/index.html" class="btn btn-neutral float-right" title="Resilient Restoration (WSU)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="3.6--Lesson-3.6--Controlling-Simulation-API.html" class="btn btn-neutral float-left" title="Publishing and Subscribing with the Simulation API" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2017-2021, Battelle Memorial Institute, All rights reserved..

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>